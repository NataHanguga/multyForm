<p-button 
  icon="pi pi-arrow-left" 
  class="ui-button-info" 
  [routerLink]="['/']"
  routerLinkActive="router-link-active"
></p-button>
<div class="ui-grid ui-grid-responsive ">
  <div class="ui-grid-row">
    <div class="ui-grid-col-2"></div>
    <h3 class="ui-grid-col-2">Create new user</h3>
    <div class="ui-grid-col-2"></div>
  </div>
  <form [formGroup]="teacherForm">
    <div class="ui-grid-row">
      <div class="ui-grid-col-2">Teacher Full Name:</div>
      <input 
        type="text" 
        name="teacherName" 
        class="ui-grid-col-4"
        id="teacherName" 
        formControlName="teacherName" 
        pInputText
        autocomplete="off" 
        required />
    </div>
    <div class="ui-grid-row">
      <p-button 
        icon="pi pi-plus" 
        id="add-subject" 
        class="ui-grid-col-2"
        (click)="addNewStudent()" 
        styleClass="ui-button-secondary"
        label="Add student"
      ></p-button>
      <p-button 
        label="Save" 
        (click)="save(teacherForm)" 
        [routerLink]="['/']"
        class="ui-grid-col-2">
      </p-button>
    </div>
    <div formArrayName="students">
      <div
        *ngFor="let student of teacherForm; let i = index">
        <div class="ui-grid-row">
          <span class="ui-grid-col-2"><b>Student {{ i + 1 }}</b></span>
          <p-button 
            (click)="removeSubject(i)" 
            class="ui-grid-col-2"
            styleClass="ui-button-danger" 
            label="Delete student {{ i + 1 }}">
          </p-button>
        </div>

        <div [formGroupName]="i">
          <div class="ui-grid-row">
            <div class="ui-grid-col-2">Student Full Name:</div>
            <input 
              type="text" 
              name="fullName" 
              class="ui-grid-col-4"
              id="fullName" 
              formControlName="fullName" 
              minlength="2"
              pInputText
              autocomplete="off" 
              required />
          </div>
          <div class="ui-grid-row">
            <div class="ui-grid-col-2">Student Class Name:</div>
            <input 
              type="number" 
              name="classNumber" 
              id="classNumber"
              class="ui-grid-col-4" 
              formControlName="classNumber" 
              pInputText
              min="1"
              max="9"
              autocomplete="off" 
              required />
          </div>
          <div class="ui-grid-row">
            <div class="ui-grid-col-2">Start study date:</div>
            <input 
              type="date" 
              name="startDate" 
              id="startDate"
              class="ui-grid-col-4" 
              formControlName="startDate" 
              pInputText
              autocomplete="off" 
              required />
          </div>
          <div class="ui-grid-row">
            <div class="ui-grid-col-2">Student Pay Type:</div>
            <p-selectButton 
              [options]="types" 
              class="ui-grid-col-6" 
              #butt
              (click)="butt.value === null ? 
              teacherForm.controls.students.controls[i].value.studentType = types[0].value : 
              teacherForm.controls.students.controls[i].value.studentType = butt.value" >
            </p-selectButton>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
